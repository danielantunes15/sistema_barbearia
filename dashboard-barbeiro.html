<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barbearia - Dashboard Barbeiro</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/dashboard.css">
</head>
<body id="dashboard-barbeiro">
    <div class="container">
        
        <div class="header-barbeiro">
            <div>
                <h1 id="barbeiroNome">Olá, Carregando...</h1>
                <p>Aqui está o resumo do seu dia.</p>
            </div>
            <button id="logoutBtn" class="btn-secondary btn-logout">Sair</button>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div class="icon-wrapper" style="background: #2980b9;">
                    <i data-feather="users"></i>
                </div>
                <h4>Total Clientes</h4>
                <div class="stat-number" id="totalClientes">0</div>
            </div>
            <div class="stat-card">
                <div class="icon-wrapper" style="background: #27ae60;">
                    <i data-feather="scissors"></i>
                </div>
                <h4>Cortes Hoje</h4>
                <div class="stat-number" id="cortesHoje">0</div>
            </div>
            <div class="stat-card">
                <div class="icon-wrapper" style="background: #8e44ad;">
                    <i data-feather="calendar"></i>
                </div>
                <h4>Cortes Mês</h4>
                <div class="stat-number" id="cortesMes">0</div>
            </div>
            <div class="stat-card">
                <div class="icon-wrapper" style="background: #f39c12;">
                    <i data-feather="gift"></i>
                </div>
                <h4>Fidelidades Próx.</h4>
                <div class="stat-number" id="totalFidelidadesProximas">0</div>
            </div>
        </div>
        
        <div class="actions app-nav">
            <a href="scanner.html" class="btn btn-secondary app-nav-item">
                <i data-feather="maximize"></i>
                <span>Escanear</span>
            </a>
            <a href="relatorios.html" class="btn btn-secondary app-nav-item">
                <i data-feather="pie-chart"></i>
                <span>Relatórios</span>
            </a>
            <a href="gerenciar-usuarios.html" class="btn btn-secondary app-nav-item">
                <i data-feather="user-plus"></i>
                <span>Gerenciar</span>
            </a>
        </div>
        
        <div class="content-scroll">
            <div class="card">
                <h3>Agendamentos de Hoje (<span id="dataAgendamentos">Carregando...</span>)</h3>
                <div id="agendamentosHoje" class="clientes-lista">
                    <p style="text-align: center; color: #b3b3b3;">Carregando agendamentos...</p>
                </div>
            </div>
            
            <div class="card">
                <h3>Clientes Próximos da Fidelidade (8+ pontos)</h3>
                <div id="clientesProximos" class="clientes-lista">
                    </div>
            </div>
            
            <div class="card">
                <h3>Todos os Clientes</h3>
                <div class="search-bar">
                    <input type="text" id="searchClient" placeholder="Buscar cliente...">
                </div>
                <div id="todosClientes" class="clientes-lista">
                    </div>
            </div>
            
            <div class="card">
                <h3>Estatísticas de Frequência</h3>
                <div id="estatisticasFrequencia" class="stats-container">
                    </div>
            </div>
        </div>
    </div>
    
    <div id="clienteModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalClienteNome">Carregando...</h3>
                <button class="close-btn" id="modalCloseBtn"><i data-feather="x"></i></button>
            </div>
            <div class="modal-body">
                <div class="modal-info-grid">
                    <div>
                        <strong>CPF:</strong>
                        <span id="modalClienteCpf">...</span>
                    </div>
                    <div>
                        <strong>Email:</strong>
                        <span id="modalClienteEmail">...</span>
                    </div>
                    <div>
                        <strong>Pontos Atuais:</strong>
                        <span id="modalClientePontos">...</span>
                    </div>
                    <div>
                        <strong>Cortes Grátis:</strong>
                        <span id="modalClienteCortesGratis">...</span>
                    </div>
                </div>

                <h4>Histórico de Cortes</h4>
                <div id="modalClienteHistorico" class="modal-historico-lista">
                    <p>Carregando histórico...</p>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.2.0/crypto-js.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/pages/barbeiro.js"></script>
    <script src="js/main.js"></script>

    <script>
      feather.replace()
    </script>
</body>
</html>